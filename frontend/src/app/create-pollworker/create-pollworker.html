


<div class="fixed z-38 top-0 right-0 h-screen w-11/12">
  <div
    class="relative flex h-full z-39 flex-col divide-y divide-gray-200 bg-white shadow-xl dark:divide-white/10 dark:bg-gray-800 dark:after:absolute dark:after:inset-y-0 dark:after:left-0 dark:after:w-px dark:after:bg-white/10">

    <div class="flex shrink-0 px-2 py-2 mt-16">
      <div class="grid w-full grid-cols-3 gap-4">
        <div class="text-black cursor-pointer" (click)="handleCancel()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
          </svg>
        </div>
        <div class="text-center text-2xl">
          Poll Worker Application
        </div>
      </div>
    </div>

    @if (!show()) {
    <div class="flex min-h-0 flex-1 flex-col overflow-y-auto py-6">
      <div class="relative mt-6 flex-1 px-4 sm:px-6">

        @if (screenNames()) {

        <!-- ===================== INFORMATION ===================== -->
        <div class="w-full bg-gray-100 border border-gray-200 p-2 text-xl font-bold flex items-center gap-2">
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10" fill="#F3F4F6" stroke="#D1D5DB" stroke-width="1" />
            <circle cx="12" cy="9.5" r="3" fill="#111827" />
            <path d="M7 18c1.2-2.4 3.1-3.6 5-3.6s3.8 1.2 5 3.6" fill="none" stroke="#111827" stroke-width="2"
              stroke-linecap="round" />
          </svg>
          <span>Information</span>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-3">
          <soch-input-text [fieldObject]="getFiledObject('firstName')"
            (eventInputData)="saveData('firstName', $event)"
            [editValue]="getFieldValue('firstName')"></soch-input-text>

          <soch-input-text [fieldObject]="getFiledObject('middleName')"
            (eventInputData)="saveData('middleName', $event)"
            [editValue]="getFieldValue('middleName')"></soch-input-text>

          <soch-input-text [fieldObject]="getFiledObject('lastName')"
            (eventInputData)="saveData('lastName', $event)"
            [editValue]="getFieldValue('lastName')"></soch-input-text>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-2">
          <soch-input-number [fieldObject]="getFiledObject('workNumber')"
            (eventInputData)="saveData('workNumber',$event)"
            [editValue]="getFieldValue('workNumber')"></soch-input-number>

          <soch-input-number [fieldObject]="getFiledObject('homeNumber')"
            (eventInputData)="saveData('homeNumber',$event)"
            [editValue]="getFieldValue('homeNumber')"></soch-input-number>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-1">
          <soch-input-text [fieldObject]="getFiledObject('emailId')"
            (eventInputData)="saveData('emailId',$event)"
            [editValue]="getFieldValue('emailId')"></soch-input-text>

          @if (createPollworkerForm?.get('emailId')?.invalid && createPollworkerForm?.get('emailId')?.dirty &&
            (createPollworkerForm?.get('emailId')?.errors?.['email'] || createPollworkerForm?.get('emailId')?.errors?.['pattern'])) {
            <div class="text-red-600 text-sm mt-1">
              Must follow a similar format: example@email.com
            </div>
          }
        </div>

        
         <div class="grid grid-cols-1">Gender
          </div>
          
           <div class="grid grid-cols-1">
            <soch-radio-button [options]="genderOptions()"  (eventInputData)="saveData('gender', $event)"
            [editValue]="getFieldValue('gender')"></soch-radio-button>
        </div>
         <div class="grid grid-cols-1 mb-2">

         </div>

<div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-3">
  <!-- Year -->
  <soch-input-text
    [fieldObject]="getFiledObject('yearOfBirth')"
    (eventInputData)="saveData('yearOfBirth',$event)"
    [editValue]="getFieldValue('yearOfBirth')">
  </soch-input-text>

  <!-- Month (visible but blocked until year) -->
  <div class="relative">
    <soch-select
      [fieldObject]="getFiledObject('monthOfBirth')"
      (eventInputData)="saveData('monthOfBirth', $event)"
      [options]="months()"
      [editValue]="getFieldValue('monthOfBirth')">
    </soch-select>

    @if (!isYearFilled()) {
      <div
        class="absolute inset-0 z-10 cursor-not-allowed"
        (click)="blockMonthClick()">
      </div>
    }
  </div>

  <!-- Day (visible but blocked until year + month) -->
  <div class="relative">
    <soch-select
      [fieldObject]="getFiledObject('dayOfBirth')"
      (eventInputData)="saveData('dayOfBirth', $event)"
      [options]="days()"
      [editValue]="getFieldValue('dayOfBirth')">
    </soch-select>

    @if (!isYearFilled() || !isMonthFilled()) {
      <div
        class="absolute inset-0 z-10 cursor-not-allowed"
        (click)="blockDayClick()">
      </div>
    }
  </div>
</div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-1">
          <soch-input-ssn [fieldObject]="getFiledObject('ssn')"
            (eventInputData)="saveData('ssn',$event)"
            [editValue]="getFieldValue('ssn')"></soch-input-ssn>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-2">
          <soch-input-text [fieldObject]="getFiledObject('address1')"
            (eventInputData)="saveData('address1',$event)"
            [editValue]="getFieldValue('address1')"></soch-input-text>

          <soch-input-text [fieldObject]="getFiledObject('address2')"
            (eventInputData)="saveData('address2',$event)"
            [editValue]="getFieldValue('address2')"></soch-input-text>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-3">
          <soch-input-text [fieldObject]="getFiledObject('city')"
            (eventInputData)="saveData('city', $event)"
            [editValue]="getFieldValue('city')"></soch-input-text>

          <soch-select [fieldObject]="getFiledObject('state')"
            (eventInputData)="saveData('state', $event)"
            [options]="states()"
            [editValue]="getFieldValue('state')"></soch-select>

          <soch-input-zipcode [fieldObject]="getFiledObject('zipCode')"
            (eventInputData)="saveData('zipCode', $event)"
            [editValue]="getFieldValue('zipCode')">
          </soch-input-zipcode>
        </div>

        <div class="grid grid-cols-1 mb-3 mt-3 gap-4 md:grid-cols-1">
          <soch-checkbox
            [displayName]="'Mailing address is same as physical address'"
            (eventInputData)="getAddress($event)">
          </soch-checkbox>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-2">
          <soch-input-text [fieldObject]="getFiledObject('mailingAddress1')"
            (eventInputData)="saveData('mailingAddress1',$event)"
            [editValue]="getFieldValue('mailingAddress1')"></soch-input-text>

          <soch-input-text [fieldObject]="getFiledObject('mailingAddress2')"
            (eventInputData)="saveData('mailingAddress2',$event)"
            [editValue]="getFieldValue('mailingAddress2')"></soch-input-text>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-3">
          <soch-input-text [fieldObject]="getFiledObject('mailingCity')"
            (eventInputData)="saveData('mailingCity', $event)"
            [editValue]="getFieldValue('mailingCity')"></soch-input-text>
@if (showMailingState()) {
  <soch-select
    [fieldObject]="getFiledObject('mailingState')"
    (eventInputData)="saveData('mailingState', $event)"
    [options]="states()"
    [editValue]="getFieldValue('mailingState')">
  </soch-select>
}

          <soch-input-text [fieldObject]="getFiledObject('mailingZipCode')"
            (eventInputData)="saveData('mailingZipCode', $event)"
            [editValue]="getFieldValue('mailingZipCode')"></soch-input-text>
        </div>

        <!-- ===================== QUESTIONS ===================== -->
        <div class="w-full">
          <div class="w-full bg-gray-100 border border-gray-200 p-2 text-xl font-bold">
            Questions
          </div>
</div>
         
            
              @if(pwLoadData() && pwLoadData().electionPartiesDTOs.length > 0)
          {
            <div class="grid grid-col-1">
            Party Affiliation
           </div> 
         <div class="grid grid-cols-1">
            <soch-radio-button [options]="pwLoadData().electionPartiesDTOs"(eventInputData)="onSelectQuestion($event,pwLoadData().electionPartiesDTOs)" [displayName]="'partyName'"></soch-radio-button>
          </div>
        }
          
        
          @if(pwLoadData()){
        @for(loadData of pwLoadData()?.pwQuestionsDTO.generalQAs;track loadData.pwQuestionId ){
        
          <div class="grid grid-cols-1">
              <div [innerHTML]="loadData?.name"></div>
          </div>
        
          @if(loadData?.radioFlag){
               <div class="grid grid-cols-1">
            <soch-radio-button [options]="loadData?.pwQuestionOptionDTOs"
            (eventInputData)="onSelectQuestion($event,loadData)"></soch-radio-button>


             
          </div>
          <!-- <soch-other-radio [options]="loadData?.pwQuestionOptionDTOs"
            (eventInputData)="getFieldValue('pwQuestionsDTO')"
            [editValue]="getFieldValue('pwQuestionsDTO')"></soch-other-radio> -->
            
          }
          @if(loadData?.textBoxFlag)
          {
          <!-- soch teat area -->

          <soch-text-area [options]="loadData?.pwQuestionOptionDTOs" (eventInputData)="getFieldValue('pwQuestionsDTO')"
            [editValue]="getFieldValue('pwQuestionsDTO')"></soch-text-area>
          }


          @if(loadData?.optionFlag)
          {
          <!--dropdown -->
          <soch-checkbox [options]="loadData?.pwQuestionOptionDTOs" (eventInputData)="getFieldValue('pwQuestionsDTO')"
            [editValue]="getFieldValue('pwQuestionsDTO')"></soch-checkbox>
          }
       
          }
        }

        <!-- ===================== LANGUAGES ===================== -->
         @if(pwLoadData() && pwLoadData().languageDTOs.length>0){
        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-1">
          <soch-select [fieldObject]="getFiledObject('primaryLanguageDTO')"
            (eventInputData)="saveData('primaryLanguageDTO', $event)"
            [options]="pwLoadData().languageDTOs"
            [editValue]="getFieldValue('primaryLanguageDTO')"></soch-select>
        </div>

        <div class="grid grid-cols-1 mb-2 gap-4 md:grid-cols-1">
          <soch-select [fieldObject]="getFiledObject('secondaryLanguageDTO')"
            (eventInputData)="saveData('secondaryLanguageDTO', $event)"
            [options]="pwLoadData().languageDTOs"
            [editValue]="getFieldValue('secondaryLanguageDTO')"></soch-select>
        </div>
      }
        <!-- ===================== AGREEMENT ===================== 
        <div class="w-full mt-6">
          <div class="w-full bg-gray-100 border border-gray-200 p-2 text-xl font-bold">
            Agreement Conditions
          </div>

          <div class="w-full border-x border-b border-gray-300 p-4">
            <form [formGroup]="agreementForm">
              <p class="text-gray-700 text-sm mb-4 text-justify">
                I hereby certify that, to the best of my knowledge, the provided information is true and accurate.
              </p>

              <div class="flex justify-end items-center gap-2">
                <input type="checkbox" id="acceptTerms" formControlName="acceptTerms"
                  class="h-4 w-4 cursor-pointer accent-blue-600" />

                <label for="acceptTerms" class="cursor-pointer font-semibold">
                  I agree to the above terms <span class="text-red-600">*</span>
                </label>
              </div>

              <div *ngIf="agreementForm.get('acceptTerms')?.touched && agreementForm.get('acceptTerms')?.invalid"
                class="text-red-600 text-sm mt-2 text-right">
                You must accept the agreement to continue.
              </div>
            </form>
          </div>
        </div>
-->
        <div class="w-full mt-6">
  <div class="w-full bg-gray-100 border border-gray-200 p-2 text-xl font-bold">
    Agreement Conditions
  </div>
 <!-- <form [formGroup]="agreementForm"> -->
  <div class="w-full border-x border-b border-gray-300 p-4">
    <p class="text-gray-700 text-sm mb-4 text-justify">
      I hereby certify that, to the best of my knowledge, the provided information is true and accurate.
    </p>

    <div class="flex justify-end items-center gap-2">
      <input
        type="checkbox"
        id="acceptTerms"
        class="h-4 w-4 cursor-pointer accent-blue-600"
        (change)="onAgreementChange($event)"
      />

      <label for="acceptTerms" class="cursor-pointer font-semibold">
        I agree to the above terms <span class="text-red-600">*</span>
      </label>
    </div>

    @if (showAgreementError) {
      <div class="text-red-600 text-sm mt-2 text-right">
        You must accept the agreement to continue.
      </div>
    }

  </div>
  <!-- </form> -->
</div>
        }
      </div>

      <div class="flex shrink-0 justify-end px-2 py-2">
        <button
          type="submit"
          class="ml-4 inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:bg-indigo-500 dark:shadow-none dark:hover:bg-indigo-400 dark:focus-visible:outline-indigo-500"
          (click)="onSend()">
          Send
        </button>
      </div>
    </div>
    }
    <div class="flex shrink-0 justify-end px-4 py-4"> 
  </div>
  </div>
</div>